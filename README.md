# Infrastructure as Code (IaC) Security Lab with Checkov

This lab demonstrates a full **Infrastructure as Code (IaC) security workflow** using **Terraform** and **Checkov**, integrated with **GitHub Actions** pipelines. It illustrates the detection of vulnerabilities, automated reporting, and remediation planning ‚Äî showcasing best practices in **cloud security** and **DevSecOps**.

---

## üöÄ Lab Steps

### 1. Creation of a New Repository
- Initialized a **GitHub repository** named `iac-security-lab`.
- Configured standard `.gitignore` and repository settings.
- Repository serves as the **central workspace** for IaC security experiments.

### 2. Validation
- Verified repository creation and access.
- Confirmed the repository supports **GitHub Actions workflows**.

### 3. Creation of the File `main.tf`
- Developed a **minimal Terraform configuration** with intentionally insecure settings for pedagogical purposes:
  - Security group with **open SSH to 0.0.0.0/0**.
  - EC2 instance with **unencrypted root disk**.
- File structure is simple yet sufficient to trigger security checks via **Checkov**.

### 4. Creation of Pipeline 01: IaC Scan with Checkov
- Configured a **GitHub Actions workflow** (`iac_scan.yml`) to automatically scan the repository upon `push` and `pull_request`.
- Steps include:
  - Checkout of repository.
  - Installation of Python and **Checkov**.
  - Execution of **Checkov scan** across all IaC files.
  - Generation of **JSON** and **TXT** reports.

### 5. Scan Report Pipeline 01: No Vulnerability Detected
- Initial pipeline run returned **‚ÄúNo Vulnerability detected‚Äù** for demonstration purposes.
- Reports are archived as **artifacts** for review.

### 6. Download of the TXT File Generated by the Gitleaks Scanner
- Although primarily using Checkov, added **Gitleaks** for detecting secrets in code.
- TXT report downloaded from **GitHub Actions artifacts** for inspection.

### 7. Interpretation of the TXT File via ChatGPT with Report Sent to Supervisors
- TXT report was analyzed using **ChatGPT** to identify potential risks.
- Findings were summarized and sent to supervisors with **recommendations for remediation**.

### 8. Proposal of a Remediation Action Plan
- Drafted a **step-by-step remediation plan** addressing detected vulnerabilities:
  - Restricting security group ingress rules.
  - Enabling disk encryption on cloud instances.
  - Removing hard-coded secrets and using environment variables or secret managers.

### 9. Creation of Pipeline 02: Security Gate
- Developed a second **GitHub Actions workflow** (`iac-security-gate.yml`) that:
  - Scans the repository with Checkov.
  - Detects **critical vulnerabilities**.
  - Fails the pipeline if at least one **critical vulnerability** is present.

### 10. Pipeline 02 Displays Red Following the Detection of a Critical Vulnerability
- Simulated a critical vulnerability in `main.tf`.
- Pipeline correctly displayed **red status**, demonstrating the **security gate enforcement**.
- JSON and TXT reports generated for review.
- This enforces **continuous security checks** before merging changes, showcasing strong DevSecOps practices.

---

## üß† Key Learnings and Skills Demonstrated
- Infrastructure as Code (IaC) security scanning using **Checkov**.
- GitHub Actions for **CI/CD pipeline automation**.
- Security gate implementation for **critical vulnerability enforcement**.
- Artifact management and report interpretation.
- DevSecOps workflow: **detect ‚Üí report ‚Üí remediate**.
- Collaboration and communication skills by reporting findings to supervisors.

---

## üìÅ Repository Structure

```

iac-security-lab/
‚îÇ
‚îú‚îÄ main.tf                      # Minimal Terraform config with intentional vulnerabilities
‚îú‚îÄ README.md                     # Lab documentation
‚îú‚îÄ .github/
‚îÇ   ‚îî‚îÄ workflows/
‚îÇ       ‚îú‚îÄ iac_scan.yml         # Pipeline 01: IaC scan with Checkov
‚îÇ       ‚îî‚îÄ iac-security-gate.yml # Pipeline 02: Security Gate

```

---

## ‚úÖ Conclusion
This lab demonstrates an **end-to-end IaC security workflow**, from initial scanning to automated enforcement of a security gate. It emphasizes best practices in **cloud security**, **CI/CD automation**, and **DevSecOps culture**, and can be easily extended for real-world enterprise environments.

---

```

This README is structured, **professional**, and highlights both technical skills and workflow understanding ‚Äî perfect for impressing recruiters or showcasing in a portfolio.


